import{S as te,d as le,e as ne,D as A,aX as oe,aW as re,l as _,o as m,J as F,u as I,p as q,j as y,q as f,K as L,b as v,c as ae,t as w,k as C,E,M as x,a8 as se,aC as ie,al as ce,a as fe,m as H,r as Y,n as ue,am as pe,aA as _e,as as $e,az as he}from"./pico.conditional.jade.min-c470e1a1.js";const de="/ltn/assets/boundaries-2701bb3b.geojson";function U(o,e,t){const l=o.slice();return l[5]=e[t][0],l[6]=e[t][1],l}function W(o,e,t){const l=o.slice();return l[9]=e[t],l}function z(o,e,t){const l=o.slice();return l[12]=e[t],l}function me(o){let e=o[12]+"",t;return{c(){t=H(e)},m(l,r){y(l,t,r)},p(l,r){r&2&&e!==(e=l[12]+"")&&Y(t,e)},d(l){l&&C(t)}}}function G(o){let e,t,l;function r(){return o[2](o[12])}return t=new ie({props:{$$slots:{default:[me]},$$scope:{ctx:o}}}),t.$on("click",r),{c(){e=_("li"),F(t.$$.fragment)},m(n,i){y(n,e,i),L(t,e,null),l=!0},p(n,i){o=n;const s={};i&32770&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(n){l||(v(t.$$.fragment,n),l=!0)},o(n){w(t.$$.fragment,n),l=!1},d(n){n&&C(e),x(t)}}}function X(o){let e,t,l=o[9]+"",r;return{c(){e=_("p"),t=_("a"),r=H(l),q(t,"href",`index.html?project=ltn_cnt/${o[5]}/${o[9]}`)},m(n,i){y(n,e,i),f(e,t),f(t,r)},p:ue,d(n){n&&C(e)}}}function Q(o){let e,t,l,r,n=A(o[6]),i=[];for(let s=0;s<n.length;s+=1)i[s]=X(W(o,n,s));return{c(){e=_("div"),t=_("h2"),t.textContent=`${o[5]}`,l=m();for(let s=0;s<i.length;s+=1)i[s].c();r=m(),q(e,"class","group")},m(s,g){y(s,e,g),f(e,t),f(e,l);for(let p=0;p<i.length;p+=1)i[p]&&i[p].m(e,null);f(e,r)},p(s,g){if(g&0){n=A(s[6]);let p;for(p=0;p<n.length;p+=1){const M=W(s,n,p);i[p]?i[p].p(M,g):(i[p]=X(M),i[p].c(),i[p].m(e,r))}for(;p<i.length;p+=1)i[p].d(1);i.length=n.length}},d(s){s&&C(e),E(i,s)}}}function ge(o){let e,t=o[4].name+"",l;return{c(){e=_("p"),l=H(t)},m(r,n){y(r,e,n),f(e,l)},p(r,n){n&16&&t!==(t=r[4].name+"")&&Y(l,t)},d(r){r&&C(e)}}}function ve(o){let e,t;return e=new he({props:{openOn:"hover",$$slots:{default:[ge,({props:l})=>({4:l}),({props:l})=>l?16:0]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&32784&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function be(o){let e,t,l,r;return e=new pe({props:{paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":_e(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[ve]},$$scope:{ctx:o}}}),e.$on("click",ye),l=new $e({props:{paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels",manageHoverState:!0}}),{c(){F(e.$$.fragment),t=m(),F(l.$$.fragment)},m(n,i){L(e,n,i),y(n,t,i),L(l,n,i),r=!0},p(n,i){const s={};i&32768&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){r||(v(e.$$.fragment,n),v(l.$$.fragment,n),r=!0)},o(n){w(e.$$.fragment,n),w(l.$$.fragment,n),r=!1},d(n){n&&C(t),x(e,n),x(l,n)}}}function we(o){let e,t;return e=new ce({props:{data:o[0],generateId:!0,$$slots:{default:[be]},$$scope:{ctx:o}}}),{c(){F(e.$$.fragment)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&1&&(n.data=l[0]),r&32768&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(v(e.$$.fragment,l),t=!0)},o(l){w(e.$$.fragment,l),t=!1},d(l){x(e,l)}}}function ke(o){let e,t,l,r,n,i,s,g,p,M,B,K,N,P,D,T,J,j,b,R,k=A(o[1]),u=[];for(let a=0;a<k.length;a+=1)u[a]=G(z(o,k,a));const ee=a=>w(u[a],1,1,()=>{u[a]=null});let S=A(V()),h=[];for(let a=0;a<S.length;a+=1)h[a]=Q(U(o,S,a));return b=new oe({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${re}`,standardControls:!0,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[we]},$$scope:{ctx:o}}}),b.$on("error",o[3]),{c(){e=_("div"),t=_("div"),l=_("h2"),l.textContent="Connected Neighbourhoods Tool",r=m(),n=_("p"),n.textContent="Choose a boundary below or on the map to begin sketching:",i=m(),s=_("ul");for(let a=0;a<u.length;a+=1)u[a].c();g=m(),p=_("hr"),M=m(),B=_("p"),B.textContent="Or continue with a previously opened file:",K=m(),N=_("div");for(let a=0;a<h.length;a+=1)h[a].c();P=m(),D=_("style"),D.textContent=`.group {
        border: 1px solid black;
        padding: 4px;
        margin-bottom: 8px;
        break-inside: avoid-column;
      }`,T=m(),J=_("div"),j=_("div"),F(b.$$.fragment),I(s,"columns","3"),I(N,"columns","2"),q(t,"class","pico left svelte-1suden8"),I(j,"position","relative"),I(j,"width","100%"),I(j,"height","100%"),q(J,"class","main svelte-1suden8"),I(e,"display","flex")},m(a,$){y(a,e,$),f(e,t),f(t,l),f(t,r),f(t,n),f(t,i),f(t,s);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(s,null);f(t,g),f(t,p),f(t,M),f(t,B),f(t,K),f(t,N);for(let d=0;d<h.length;d+=1)h[d]&&h[d].m(N,null);f(t,P),f(t,D),f(e,T),f(e,J),f(J,j),L(b,j,null),R=!0},p(a,[$]){if($&2){k=A(a[1]);let c;for(c=0;c<k.length;c+=1){const O=z(a,k,c);u[c]?(u[c].p(O,$),v(u[c],1)):(u[c]=G(O),u[c].c(),v(u[c],1),u[c].m(s,null))}for(fe(),c=k.length;c<u.length;c+=1)ee(c);ae()}if($&0){S=A(V());let c;for(c=0;c<S.length;c+=1){const O=U(a,S,c);h[c]?h[c].p(O,$):(h[c]=Q(O),h[c].c(),h[c].m(N,null))}for(;c<h.length;c+=1)h[c].d(1);h.length=S.length}const d={};$&32769&&(d.$$scope={dirty:$,ctx:a}),b.$set(d)},i(a){if(!R){for(let $=0;$<k.length;$+=1)v(u[$]);v(b.$$.fragment,a),R=!0}},o(a){u=u.filter(Boolean);for(let $=0;$<u.length;$+=1)w(u[$]);w(b.$$.fragment,a),R=!1},d(a){a&&C(e),E(u,a),E(h,a),x(b)}}}function ye(o){let e=o.detail.features[0].properties;Z(`${e.kind}_${e.name}`)}function Z(o){let e="";for(;;){if(e=window.prompt(`Please pick a project name to create in ${o}`,e)||"",e=="")return;let t=`ltn_cnt/${o}/${e}`;if(window.localStorage.getItem(t)!=null){window.alert(`The project name ${e} is already used; please pick another`);continue}window.localStorage.setItem(t,JSON.stringify({type:"FeatureCollection",features:[],study_area_name:o})),window.location.href=`index.html?project=${encodeURIComponent(t)}`;return}}function V(){let o=new Map;for(let e=0;e<window.localStorage.length;e++){let t=window.localStorage.key(e);if(t.startsWith("ltn_cnt/"))try{let[l,r,n]=t.split("/");o.has(r)||o.set(r,[]),o.get(r).push(n)}catch{}}for(let e of o.values())e.sort();return o}function Ce(o,e,t){let l={type:"FeatureCollection",features:[]},r=[];return se(async()=>{let s=await fetch(de);t(0,l=await s.json());for(let g of l.features)r.push(g.properties.name);r.sort(),t(1,r)}),[l,r,s=>Z(`LAD_${s}`),s=>{console.log(s.detail.error)}]}class je extends te{constructor(e){super(),le(this,e,Ce,ke,ne,{})}}new je({target:document.getElementById("app")});
