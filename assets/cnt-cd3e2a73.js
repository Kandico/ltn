import{S as ye,i as Ce,s as je,x as N,aO as Le,aN as Se,am as Ae,b as _,c as w,t as B,G as D,f as A,a8 as ue,j as M,a as g,g as f,H as O,l as fe,q as m,D as Y,p as d,d as k,y as P,I as F,r as Ne,_ as Ie,ai as De,C as Z,e as ve,as as we,n as Oe,aj as Fe,ay as Re,aq as Ge,h as x,ar as qe}from"./pico.conditional.jade.min-a9eb1742.js";const Be="/ltn/assets/boundaries-772b6fb5.geojson";function _e(a,e,o){const t=a.slice();return t[11]=e[o][0],t[12]=e[o][1],t}function pe(a,e,o){const t=a.slice();return t[15]=e[o],t}function he(a,e,o){const t=a.slice();return t[18]=e[o],t}function de(a,e,o){const t=a.slice();return t[18]=e[o],t}function Ee(a){let e,o,t=N(a[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=$e(he(a,t,n));const r=n=>m(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=ve()},m(n,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,s);g(n,e,s),o=!0},p(n,s){if(s&4){t=N(n[2]);let i;for(i=0;i<t.length;i+=1){const c=he(n,t,i);l[i]?(l[i].p(c,s),d(l[i],1)):(l[i]=$e(c),l[i].c(),d(l[i],1),l[i].m(e.parentNode,e))}for(Z(),i=t.length;i<l.length;i+=1)r(i);Y()}},i(n){if(!o){for(let s=0;s<t.length;s+=1)d(l[s]);o=!0}},o(n){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)m(l[s]);o=!1},d(n){n&&k(e),P(l,n)}}}function He(a){let e,o,t=N(a[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=ge(de(a,t,n));const r=n=>m(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=ve()},m(n,s){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,s);g(n,e,s),o=!0},p(n,s){if(s&2){t=N(n[1]);let i;for(i=0;i<t.length;i+=1){const c=de(n,t,i);l[i]?(l[i].p(c,s),d(l[i],1)):(l[i]=ge(c),l[i].c(),d(l[i],1),l[i].m(e.parentNode,e))}for(Z(),i=t.length;i<l.length;i+=1)r(i);Y()}},i(n){if(!o){for(let s=0;s<t.length;s+=1)d(l[s]);o=!0}},o(n){l=l.filter(Boolean);for(let s=0;s<l.length;s+=1)m(l[s]);o=!1},d(n){n&&k(e),P(l,n)}}}function Me(a){let e=a[18]+"",o;return{c(){o=B(e)},m(t,l){g(t,o,l)},p(t,l){l&4&&e!==(e=t[18]+"")&&x(o,e)},d(t){t&&k(o)}}}function $e(a){let e,o,t;function l(){return a[8](a[18])}return o=new we({props:{$$slots:{default:[Me]},$$scope:{ctx:a}}}),o.$on("click",l),{c(){e=_("li"),D(o.$$.fragment)},m(r,n){g(r,e,n),O(o,e,null),t=!0},p(r,n){a=r;const s={};n&8388612&&(s.$$scope={dirty:n,ctx:a}),o.$set(s)},i(r){t||(d(o.$$.fragment,r),t=!0)},o(r){m(o.$$.fragment,r),t=!1},d(r){r&&k(e),F(o)}}}function Je(a){let e=a[18]+"",o;return{c(){o=B(e)},m(t,l){g(t,o,l)},p(t,l){l&2&&e!==(e=t[18]+"")&&x(o,e)},d(t){t&&k(o)}}}function ge(a){let e,o,t;function l(){return a[7](a[18])}return o=new we({props:{$$slots:{default:[Je]},$$scope:{ctx:a}}}),o.$on("click",l),{c(){e=_("li"),D(o.$$.fragment)},m(r,n){g(r,e,n),O(o,e,null),t=!0},p(r,n){a=r;const s={};n&8388610&&(s.$$scope={dirty:n,ctx:a}),o.$set(s)},i(r){t||(d(o.$$.fragment,r),t=!0)},o(r){m(o.$$.fragment,r),t=!1},d(r){r&&k(e),F(o)}}}function me(a){let e,o,t=a[15]+"",l;return{c(){e=_("p"),o=_("a"),l=B(t),A(o,"href",`index.html?project=ltn_cnt/${a[11]}/${a[15]}`)},m(r,n){g(r,e,n),f(e,o),f(o,l)},p:Oe,d(r){r&&k(e)}}}function ke(a){let e,o,t,l,r=N(a[12]),n=[];for(let s=0;s<r.length;s+=1)n[s]=me(pe(a,r,s));return{c(){e=_("div"),o=_("h2"),o.textContent=`${a[11]}`,t=w();for(let s=0;s<n.length;s+=1)n[s].c();l=w(),A(e,"class","group svelte-oyd905")},m(s,i){g(s,e,i),f(e,o),f(e,t);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);f(e,l)},p(s,i){if(i&0){r=N(s[12]);let c;for(c=0;c<r.length;c+=1){const p=pe(s,r,c);n[c]?n[c].p(p,i):(n[c]=me(p),n[c].c(),n[c].m(e,l))}for(;c<n.length;c+=1)n[c].d(1);n.length=r.length}},d(s){s&&k(e),P(n,s)}}}function Pe(a){let e,o=a[10].name+"",t;return{c(){e=_("p"),t=B(o)},m(l,r){g(l,e,r),f(e,t)},p(l,r){r&1024&&o!==(o=l[10].name+"")&&x(t,o)},d(l){l&&k(e)}}}function Te(a){let e,o;return e=new qe({props:{openOn:"hover",$$slots:{default:[Pe,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment)},m(t,l){O(e,t,l),o=!0},p(t,l){const r={};l&8389632&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){m(e.$$.fragment,t),o=!1},d(t){F(e,t)}}}function Ke(a){let e,o,t,l;return e=new Fe({props:{filter:["==",["get","kind"],a[3]],paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Re(0,.5)},beforeId:"Road labels",manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[Te]},$$scope:{ctx:a}}}),e.$on("click",ze),t=new Ge({props:{filter:["==",["get","kind"],a[3]],paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},beforeId:"Road labels",manageHoverState:!0}}),{c(){D(e.$$.fragment),o=w(),D(t.$$.fragment)},m(r,n){O(e,r,n),g(r,o,n),O(t,r,n),l=!0},p(r,n){const s={};n&8&&(s.filter=["==",["get","kind"],r[3]]),n&8388608&&(s.$$scope={dirty:n,ctx:r}),e.$set(s);const i={};n&8&&(i.filter=["==",["get","kind"],r[3]]),t.$set(i)},i(r){l||(d(e.$$.fragment,r),d(t.$$.fragment,r),l=!0)},o(r){m(e.$$.fragment,r),m(t.$$.fragment,r),l=!1},d(r){r&&k(o),F(e,r),F(t,r)}}}function Ue(a){let e,o;return e=new De({props:{data:a[0],generateId:!0,$$slots:{default:[Ke]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment)},m(t,l){O(e,t,l),o=!0},p(t,l){const r={};l&1&&(r.data=t[0]),l&8388616&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){m(e.$$.fragment,t),o=!1},d(t){F(e,t)}}}function We(a){let e,o,t,l,r,n,s,i,c,p,T,K,y,R,E,b,C,ee,te,le,U,ne,G,oe,W,z,H,I,j,J,Q,V,re;const ae=[He,Ee],L=[];function se(u,$){return u[3]=="LAD"?0:1}b=se(a),C=L[b]=ae[b](a);let q=N(be()),h=[];for(let u=0;u<q.length;u+=1)h[u]=ke(_e(a,q,u));return j=new Le({props:{style:`https://api.maptiler.com/maps/streets-v2/style.json?key=${Se}`,standardControls:!0,bounds:[-8.943,54.631,-.901,59.489],$$slots:{default:[Ue]},$$scope:{ctx:a}}}),j.$on("error",a[9]),Q=Ae(a[5][0]),{c(){e=_("div"),o=_("h2"),o.textContent="Connected Neighbourhoods Tool",t=w(),l=_("fieldset"),r=_("label"),n=_("input"),s=B(`
      Local Authority Districts`),i=w(),c=_("label"),p=_("input"),T=B(`
      Regions`),K=w(),y=_("p"),y.textContent="Choose a boundary below or on the map to begin sketching:",R=w(),E=_("ul"),C.c(),ee=w(),te=_("hr"),le=w(),U=_("p"),U.textContent="Or continue with a previously opened file:",ne=w(),G=_("div");for(let u=0;u<h.length;u+=1)h[u].c();oe=w(),W=_("style"),W.textContent=`.group {
      border: 1px solid black;
      padding: 4px;
      margin-bottom: 8px;
      break-inside: avoid-column;
    }`,z=w(),H=_("div"),I=_("div"),D(j.$$.fragment),A(n,"type","radio"),n.__value="LAD",ue(n,n.__value),A(p,"type","radio"),p.__value="REGION",ue(p,p.__value),M(E,"columns","3"),M(G,"columns","2"),A(G,"class","svelte-oyd905"),A(e,"class","left pico svelte-oyd905"),M(I,"position","relative"),M(I,"width","100%"),M(I,"height","100%"),A(I,"class","svelte-oyd905"),A(H,"class","main svelte-oyd905"),Q.p(n,p)},m(u,$){g(u,e,$),f(e,o),f(e,t),f(e,l),f(l,r),f(r,n),n.checked=n.__value===a[3],f(r,s),f(l,i),f(l,c),f(c,p),p.checked=p.__value===a[3],f(c,T),f(e,K),f(e,y),f(e,R),f(e,E),L[b].m(E,null),f(e,ee),f(e,te),f(e,le),f(e,U),f(e,ne),f(e,G);for(let S=0;S<h.length;S+=1)h[S]&&h[S].m(G,null);f(e,oe),f(e,W),g(u,z,$),g(u,H,$),f(H,I),O(j,I,null),J=!0,V||(re=[fe(n,"change",a[4]),fe(p,"change",a[6])],V=!0)},p(u,[$]){$&8&&(n.checked=n.__value===u[3]),$&8&&(p.checked=p.__value===u[3]);let S=b;if(b=se(u),b===S?L[b].p(u,$):(Z(),m(L[S],1,1,()=>{L[S]=null}),Y(),C=L[b],C?C.p(u,$):(C=L[b]=ae[b](u),C.c()),d(C,1),C.m(E,null)),$&0){q=N(be());let v;for(v=0;v<q.length;v+=1){const ce=_e(u,q,v);h[v]?h[v].p(ce,$):(h[v]=ke(ce),h[v].c(),h[v].m(G,null))}for(;v<h.length;v+=1)h[v].d(1);h.length=q.length}const ie={};$&8388617&&(ie.$$scope={dirty:$,ctx:u}),j.$set(ie)},i(u){J||(d(C),d(j.$$.fragment,u),J=!0)},o(u){m(C),m(j.$$.fragment,u),J=!1},d(u){u&&(k(e),k(z),k(H)),L[b].d(),P(h,u),F(j),Q.r(),V=!1,Ne(re)}}}function ze(a){let e=a.detail.features[0].properties;X(`${e.kind}_${e.name}`)}function X(a){let e="";for(;;){if(e=window.prompt(`Please pick a project name to create in ${a}`,e)||"",e=="")return;let o=`ltn_cnt/${a}/${e}`;if(window.localStorage.getItem(o)!=null){window.alert(`The project name ${e} is already used; please pick another`);continue}window.localStorage.setItem(o,JSON.stringify({type:"FeatureCollection",features:[],study_area_name:a})),window.location.href=`index.html?project=${o}`}}function be(){let a=new Map;for(let e=0;e<window.localStorage.length;e++){let o=window.localStorage.key(e);if(o.startsWith("ltn_cnt/"))try{let[t,l,r]=o.split("/");a.has(l)||a.set(l,[]),a.get(l).push(r)}catch{}}for(let e of a.values())e.sort();return a}function Qe(a,e,o){let t={type:"FeatureCollection",features:[]},l=[],r=[],n="LAD";Ie(async()=>{let y=await fetch(Be);o(0,t=await y.json());for(let R of t.features)R.properties.kind=="LAD"?l.push(R.properties.name):r.push(R.properties.name);l.sort(),r.sort(),o(1,l),o(2,r)});const s=[[]];function i(){n=this.__value,o(3,n)}function c(){n=this.__value,o(3,n)}return[t,l,r,n,i,s,c,y=>X(`LAD_${y}`),y=>X(`REGION_${y}`),y=>{console.log(y.detail.error)}]}class Ve extends ye{constructor(e){super(),Ce(this,e,Qe,We,je,{})}}new Ve({target:document.getElementById("app")});
